def hora = new Date()
def javapath = "C:\\Users\\neno.DESKTOP-HFP790G\\Downloads\\jdk-17.0.5\\bin"
pipeline{
  agent any
  stages{
    stage("Hora"){
      steps{
        println "Son las: ${hora}."
        script{

          def a = 13
          if (a > 12){
            println "Hora despues de las 12, se ejecuta stage"
            BUILD_TRIGGER_BY = "${currentBuild.getBuildCauses()[0].shortDescription} / ${currentBuild.getBuildCauses()[0].userId}"
            echo "BUILD_TRIGGER_BY: ${BUILD_TRIGGER_BY}"
            
            println "Version de java instalada en el equipo:"
            javaver('Output')
          } else {
            println "Hora antes de las 12, saltamos ejecucion"
          }
        }
      }
    }
  }
}

def javaver(String version){
  bat """ "${javapath}\\java.exe" -version"""
  echo version
}
